(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[439],{34793:function(t,e,n){Promise.resolve().then(n.bind(n,50242))},50242:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return i}});var s=n(57437),a=n(2265),r=n(87138),c=n(96264);function i(){let[t,e]=(0,a.useState)(""),[n,i]=(0,a.useState)(null),[o,l]=(0,a.useState)(null),u=async()=>{l(null),i(null);try{let e=JSON.parse(t),n=await (0,c.ys)(e);i(n)}catch(t){l(t instanceof Error?t.message:"驗證失敗")}};return(0,s.jsx)("main",{className:"min-h-screen bg-slate-50 px-4 py-12",children:(0,s.jsxs)("div",{className:"mx-auto max-w-2xl",children:[(0,s.jsx)("h1",{className:"mb-2 text-xl font-bold text-slate-900",children:"驗證證書"}),(0,s.jsx)("p",{className:"mb-6 text-sm text-slate-600",children:"貼上證書 JSON 以驗證簽名是否有效。"}),(0,s.jsx)(r.default,{href:"/",className:"mb-4 inline-block text-sm text-slate-600 hover:text-slate-900",children:"← 返回首頁"}),(0,s.jsx)("textarea",{value:t,onChange:t=>e(t.target.value),placeholder:'{"inquiryId":"...","measurement":{...},"issuedAt":"...","nonce":"...","signature":"..."}',className:"mb-4 h-48 w-full rounded border border-slate-300 p-3 font-mono text-sm",rows:10}),(0,s.jsx)("button",{type:"button",onClick:u,className:"rounded bg-slate-800 px-4 py-2 text-white hover:bg-slate-700",children:"驗證"}),o&&(0,s.jsx)("p",{className:"mt-2 text-sm text-red-600",children:o}),n&&(0,s.jsx)("div",{className:"mt-4 rounded-lg p-4 ".concat(n.valid?"bg-emerald-50 text-emerald-800":"bg-red-50 text-red-800"),children:n.valid?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"font-medium",children:"證書有效"}),n.inquiryId&&(0,s.jsxs)("p",{className:"text-sm",children:["Inquiry ID: ",n.inquiryId]}),n.issuedAt&&(0,s.jsxs)("p",{className:"text-sm",children:["發證時間: ",n.issuedAt]})]}):(0,s.jsx)("p",{className:"font-medium",children:"證書無效（簽名不符或遭竄改）"})})]})})}},96264:function(t,e,n){"use strict";n.d(e,{$F:function(){return a},EN:function(){return r},mv:function(){return c},ys:function(){return i}});let s=n(20357).env.NEXT_PUBLIC_API_URL||"http://localhost:8080";async function a(t,e,n){let a=await fetch("".concat(s,"/api/certificates"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({inquiryId:e,measurement:n})});if(!a.ok)throw Error((await a.json().catch(()=>({}))).error||a.statusText);return a.json()}async function r(t){let e=await fetch("".concat(s,"/api/certificates"),{headers:{Authorization:"Bearer ".concat(t)}});if(!e.ok)throw Error(e.statusText);return e.json()}async function c(t,e){let n=await fetch("".concat(s,"/api/certificates/").concat(e),{headers:{Authorization:"Bearer ".concat(t)}});if(!n.ok)throw Error(n.statusText);return n.json()}async function i(t){let e=await fetch("".concat(s,"/api/certificates/verify"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw Error(e.statusText);return e.json()}}},function(t){t.O(0,[349,971,23,744],function(){return t(t.s=34793)}),_N_E=t.O()}]);