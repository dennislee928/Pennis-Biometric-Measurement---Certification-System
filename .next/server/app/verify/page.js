(()=>{var e={};e.id=439,e.ids=[439],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4835:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>a.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c}),s(1671),s(1506),s(5866);var r=s(3191),n=s(8716),i=s(7922),a=s.n(i),o=s(5231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let c=["",{children:["verify",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,1671)),"/Users/dennis_leedennis_lee/Documents/GitHub/Pennis-Biometric-Measurement---Certification-System/app/verify/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,1506)),"/Users/dennis_leedennis_lee/Documents/GitHub/Pennis-Biometric-Measurement---Certification-System/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/dennis_leedennis_lee/Documents/GitHub/Pennis-Biometric-Measurement---Certification-System/app/verify/page.tsx"],u="/verify/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/verify/page",pathname:"/verify",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},6623:()=>{},6533:(e,t,s)=>{Promise.resolve().then(s.bind(s,1916))},4787:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},1916:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(326),n=s(7577),i=s(434),a=s(6824);function o(){let[e,t]=(0,n.useState)(""),[s,o]=(0,n.useState)(null),[l,c]=(0,n.useState)(null),d=async()=>{c(null),o(null);try{let t=JSON.parse(e),s=await (0,a.ys)(t);o(s)}catch(e){c(e instanceof Error?e.message:"驗證失敗")}};return r.jsx("main",{className:"min-h-screen bg-slate-50 px-4 py-12",children:(0,r.jsxs)("div",{className:"mx-auto max-w-2xl",children:[r.jsx("h1",{className:"mb-2 text-xl font-bold text-slate-900",children:"驗證證書"}),r.jsx("p",{className:"mb-6 text-sm text-slate-600",children:"貼上證書 JSON 以驗證簽名是否有效。"}),r.jsx(i.default,{href:"/",className:"mb-4 inline-block text-sm text-slate-600 hover:text-slate-900",children:"← 返回首頁"}),r.jsx("textarea",{value:e,onChange:e=>t(e.target.value),placeholder:'{"inquiryId":"...","measurement":{...},"issuedAt":"...","nonce":"...","signature":"..."}',className:"mb-4 h-48 w-full rounded border border-slate-300 p-3 font-mono text-sm",rows:10}),r.jsx("button",{type:"button",onClick:d,className:"rounded bg-slate-800 px-4 py-2 text-white hover:bg-slate-700",children:"驗證"}),l&&r.jsx("p",{className:"mt-2 text-sm text-red-600",children:l}),s&&r.jsx("div",{className:`mt-4 rounded-lg p-4 ${s.valid?"bg-emerald-50 text-emerald-800":"bg-red-50 text-red-800"}`,children:s.valid?(0,r.jsxs)(r.Fragment,{children:[r.jsx("p",{className:"font-medium",children:"證書有效"}),s.inquiryId&&(0,r.jsxs)("p",{className:"text-sm",children:["Inquiry ID: ",s.inquiryId]}),s.issuedAt&&(0,r.jsxs)("p",{className:"text-sm",children:["發證時間: ",s.issuedAt]})]}):r.jsx("p",{className:"font-medium",children:"證書無效（簽名不符或遭竄改）"})})]})})}},6824:(e,t,s)=>{"use strict";s.d(t,{$F:()=>n,mv:()=>i,ys:()=>a});let r=process.env.NEXT_PUBLIC_API_URL||"http://localhost:8080";async function n(e,t,s){let n=await fetch(`${r}/api/certificates`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({inquiryId:t,measurement:s})});if(!n.ok)throw Error((await n.json().catch(()=>({}))).error||n.statusText);return n.json()}async function i(e,t){let s=await fetch(`${r}/api/certificates/${t}`,{headers:{Authorization:`Bearer ${e}`}});if(!s.ok)throw Error(s.statusText);return s.json()}async function a(e){let t=await fetch(`${r}/api/certificates/verify`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error(t.statusText);return t.json()}},1506:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i,metadata:()=>n});var r=s(9510);s(7272);let n={title:"Biometric Measurement & Certification",description:"On-device measurement with identity verification. No images leave your device."};function i({children:e}){return r.jsx("html",{lang:"zh-TW",children:r.jsx("body",{className:"min-h-screen antialiased",children:e})})}},1671:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>a,__esModule:()=>i,default:()=>o});var r=s(8570);let n=(0,r.createProxy)(String.raw`/Users/dennis_leedennis_lee/Documents/GitHub/Pennis-Biometric-Measurement---Certification-System/app/verify/page.tsx`),{__esModule:i,$$typeof:a}=n;n.default;let o=(0,r.createProxy)(String.raw`/Users/dennis_leedennis_lee/Documents/GitHub/Pennis-Biometric-Measurement---Certification-System/app/verify/page.tsx#default`)},7272:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[819,434],()=>s(4835));module.exports=r})();